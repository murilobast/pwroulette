template(name="chest")
	.title 
		h1 {{_ "open_chest"}}
	.chests
		form.chests__bag#bag
			.chests__bag__top
			.chests__bag__container
				.chests__bag__container__header
					if selected
						.chests__bag__container__header__icon
							//- mudar forma que o evento funciona depois
							img(src="/icons/items/#{selected.id}.png")
						.chests__bag__container__header__name
							h3 #{selected.name}
						span.chests__bag__container__header__amount (#{opened})
				.chests__bag__container__inner
					each getResult
						.chests__bag__container__inner__item.floating
							img(src="/icons/items/#{id}.png")
							span #{amount}
							.floating__text #{name} (#{amount})
				.chests__bag__container__form
					button(name="openChest" type="button").chests__bag__container__form__reset.button#reset Resetar
					button(name="openChest" type="button").chests__bag__container__form__macro.button#macro Macro
					button(name="openChest" type="submit").chests__bag__container__form__open.button {{_ "open"}}
			.chests__bag__bottom
		.chat#chat
			each chatMsg
				.chat__msg #{this}

	.chests
		form.chests__list#chests
			.chests__list__top
			.chests__list__container
				.chests__list__container__header
					.chests__list__container__header__name
						h3 Báus ativos no jogo
				.chests__list__container__inner
					each getChests
						.chests__bag__container__inner__item.floating.chest
							img(src="/icons/items/#{id}.png")
							span #{amount}
							.floating__text #{name}
				.chests__list__container__header
					.chests__list__container__header__name
						h3 Outros Baús
				.chests__list__container__inner
					each getOtherChests
						.chests__bag__container__inner__item.floating.chest
							img(src="/icons/items/#{id}.png")
							span #{amount}
							.floating__text #{name}
			.chests__list__bottom

	+macro

template(name="macro")
	.modal-mask
	form.modal-window
		.modal-window__top
		.modal-window__container
			.modal-window__container__header
				h3 Auto abrir
			.modal-window__container__content
				.modal-window__container__content__amount
					label Abrir
					input(type="number" name="amount" value="1").amount
					label Baús
				.modal-window__container__content__until
					span Ou até vir:
					if untl
						span.selected-item #{untl.name} (#{untl.weight}%)
				.modal-window__container__content__inner
					each chestItems
						.modal-window__container__content__inner__item.floating.macro__item
							img(src="/icons/items/#{id}.png")
							span #{amount}
							.floating__text #{name} (#{weight}%)
			.modal-window__container__footer
				button(name="openChest" type="submit").modal-window__container__footer__submit#modal_submit.button Ok
		.modal-window__bottom